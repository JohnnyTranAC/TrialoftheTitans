<aura:component controller="ExperiencesController" implements="force:hasRecordId,forceCommunity:availableForAllPageTypes">

    <!-- Choose between display and edit -->
    <aura:attribute name="isEdit" type="Boolean" default="true" />
    <!-- Choose between display and edit -->

    <aura:attribute name="Experiences" type="Experience__c[]" />
    <aura:attribute name="ExperienceList" type="Object"/>
    <aura:attribute name="columns" type="List"/>
    
    <aura:attribute name="draftValues" type="Object" default="[]"/>
    
    <aura:handler name="init" value="{!this}" action="{!c.doInit}"/>


    <lightning:datatable aura:id="dataTable"
        data="{!v.ExperienceList}"
        columns="{!v.columns}"
        keyField="id"
        onrowaction="{!c.handleRowAction}"
        onSave="{!c.onSave}"
        hideCheckboxColumn="true"
        draftValues="{! v.draftValues }"/>

    <!-- If element that determines whether experience is in edit mode or not -->
    <aura:if isTrue="{!v.isEdit}">
    <!-- Currently iterates through every experience and displays them in a lightning card. -->

        <!-- Card for displaying experiences -->
        <lightning:card>
            <div class="form">

                <!-- aura:iteration element iterates through the list of experiences to display all experiences associated with the user. -->
                <aura:iteration items="{!v.Experiences}" var="Experience">
                    <div class="slds-grid slds-gutters slds-text-align_center">
                        <div class="slds-col slds-size_1-of-2">
                            <div class="slds-text-heading_large"><lightning:formattedText name="c0" value="{!Experience.Company__c}"/></div>
                            <div class="slds-text-heading_medium"><lightning:formattedText name="p0" value="{!Experience.Position__c}"/></div>
                        </div>
                        <div class="slds-col slds-size_1-of-2 slds-text-heading_medium">
                            <p><lightning:formattedText name="ds0" value="{!Experience.Start_Date__c}" /> 
                                 - <lightning:formattedText name="de0" value="{!Experience.End_Date__c}" /></p>
                        </div>
                    </div>

                    <hr/>
                    
                </aura:iteration>
                <!-- aura:iteration element iterates through the list of experiences to display all experiences associated with the user. -->

            </div>
            <lightning:button label="Edit" class="slds-m-left_small" onclick="{! c.edit}" variant="brand-outline"/>
        </lightning:card>
        <!-- Card for displaying experiences -->

        <!-- Edit -->
        <aura:set attribute="else">

            <lightning:recordEditForm objectApiName="Experience__c">
                <lightning:messages/>
                
                <div id="edit">
                    <!-- Card for entering in information for a new experience -->
                    <lightning:card class="form">
                        <div class="slds-grid slds-gutters">
                            <div class="slds-col slds-size_1-of-3 slds-text-align_center">
                                <div class="slds-text-heading_medium">Experience</div>
                                <lightning:input aura:id="c0" label="Enter company name" name="c_0" placeholder="type here..." />
                                <lightning:input aura:id="p0" label="Enter position" name="p_0" placeholder="type here..." />
                                <lightning:input aura:id="ds0" label="Enter start date" name="sd_0" placeholder="type here..." />
                                <lightning:input aura:id="de0" label="Enter end date" name="se_0" placeholder="type here..." />
                            </div>
                        </div>

                        <!-- Cancel and Save buttons -->
                        <lightning:buttonGroup class="slds-m-top_small">
                            <lightning:button label="Cancel" type="reset"  onclick="{!c.cancel}" variant="brand-outline"/>
                            <lightning:button label="Save"   type="submit" onclick="{!c.save}"   variant="brand"/>
                        </lightning:buttonGroup>
                        <!-- Cancel and Save buttons -->

                    </lightning:card>
                    <!-- Card for entering in information for a new experience -->
                </div>
                
            </lightning:recordEditForm>

        </aura:set>
        <!-- Edit -->

    </aura:if>
    <!-- If element that determines whether experience is in edit mode or not -->

</aura:component>