<!--
    Author: Ethan Wilson
    Last updated: 10/26/2021
    Last Updated By: Iteration VI Styling and Data
    notes: jest tests have issues. wasn't able to visually confirm this
            component. But it *should* work and be all converted. 
-->

<template>
    <div class="container slds-p-around_large">
    <lightning-card title="Experiences Data Table">
        <lightning-datatable data-id="dt"
            data={experienceList}
            columns={columns}
            key-field="Id"
            class="dataTable"
            onsave={onSave}
            hide-checkbox-column=true
            onrowaction={handleRowAction}>
        </lightning-datatable>
    </lightning-card>

    <!-- If element that determines whether experience is in edit mode or not -->
    <template if:true={isEdit}>
       
        <lightning-button title="Add New Experience" label="Add New Experience" class="slds-m-left_small addXpButton" onclick={edit} variant="brand-outline">
        </lightning-button>
       
    </template>
    <!-- If element that determines whether experience is in edit mode or not -->
    <!-- Edit -->
    <template if:false={isEdit}>
        <div>
            <lightning-card class="form">
                
                <!-- Add new experience to records -->
                <lightning-record-edit-form object-api-name="Experience__c"
                    onsuccess={cancel} title="Experience Edit Form" class="recordEditForm">
                    
                    <lightning-messages></lightning-messages>
                    <lightning-input-field class="companyInput" title="Company" field-name="Company__c" ></lightning-input-field>
                    <lightning-input-field class="positionInput" title="Position" field-name="Position__c" ></lightning-input-field>
                    <lightning-input-field class="startInput" title="Start Date" field-name="Start_Date__c" ></lightning-input-field>
                    <lightning-input-field class="endInput" title="End Date" field-name="End_Date__c" ></lightning-input-field>

                    <lightning-button title="Cancel" class="slds-m-top_small cancelButton" type="cancel" onclick={cancel} variant="destructive" label="Cancel"></lightning-button>
                    <lightning-button title="Submit" class="slds-m-top_small submitButton" type="submit" variant="Brand" label="Save"></lightning-button>

                </lightning-record-edit-form>
                <!-- Add new experience to records -->

            </lightning-card>
        </div>
    </template>
    <!-- Edit -->
    </div>
</template>