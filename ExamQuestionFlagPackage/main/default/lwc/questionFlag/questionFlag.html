<template>
    <!-- This component allows the user to flag a question for review. -->
    <lightning-card variant="Narrow" title="Flag For Review">
        <!-- The Await state is displayed when this component doesn't have an Exam Question's Id connected.
             In this case, it should gracefully fail to function until it gets an Id.
             A message is displayed to indicate that it cannot function yet.
         -->
        <template if:true={awaitState}>
            Waiting for a question to be connected...
        </template>
        <!-- The Flag state is displayed when this component has an Exam Question's Id, but the question has not been flagged yet.
             In this case, it should display a button that the user can click to flag the question.
         -->
        <template if:true={flagState}>
            <lightning-buttonIcon iconName="utility:report_issue" variant="brand" onclick="{flagButtonClicked}" alternativeText="Flag for Review" title="Flag for Review" />
        </template>
        <!-- The Note state is displayed after the Flag button has been clicked. This is the most complex state.
             There are a few things that need to be displayed:
             1 - A button that will unflag the question, returning it to the previous state.
             2 - A selection component, which the user can use to pick a reason that they have flagged the question.
             3 - If the user picked "other," a text box that they can type some notes into.
             4 - A submit button, to notify the Salesforce org that the question was flagged.
         -->
        <template if:true={noteState}>
            <lightning-buttonIcon iconName="utility:report_issue" variant="bare" onclick="{unflagButtonClicked}" alternativeText="Cancel Flag" title="Cancel Flag" />
            <lightning-select name="select" label="Reason for Review" onchange="{flagReasonChanged}">
                <template for:each={reviewReasons} for:item="reason">
                    <option key="reason.id" value="{reason}">{reason}</option>
                </template>
            </lightning-select>
            <template if:true={flagReason="Other"}>
                <lightning-textarea name="flagNotesInput" required="false" value="" placeholder="Add Notes" maxlength="{maxNotesLength}" messageWhenTooLong="Maximum length of notes is {maxNotesLength} characters" />
            </template>
            <lightning-button variant="success" label="Submit" title="Submit" onclick="{submitButtonClicked}"/>
        </template>
        <!-- The Submitted state is displayed after the Submit button has been clicked.
             In this case, a message should be displayed, confirming the submission.
         -->
        <template if:true={submittedState}>
            Thank you for your feedback.
        </template>
    </lightning-card>
</template>