<template>
    <!-- This component allows the user to flag a question for review. -->
    <lightning-card variant="Narrow" title="Flag For Review" footer={errorMessage}>
        <!-- The Await state is displayed when this component doesn't have an Exam Question's Id connected.
             In this case, it should gracefully fail to function until it gets an Id.
             A message is displayed to indicate that it cannot function yet.
         -->
        <template if:true={awaitState}>
            Waiting for a question to be connected...
        </template>
        <!-- The Flag state is displayed when this component has an Exam Question's Id, but the question has not been flagged yet.
             In this case, it should display a button that the user can click to flag the question.
         -->
        <template if:true={flagState}>
            <lightning-button-icon icon-name="utility:report_issue" variant="brand" onclick={flagButtonClicked} alternative-text="Flag for Review" title="Flag for Review"></lightning-button-icon>
        </template>
        <!-- The Note state is displayed after the Flag button has been clicked. This is the most complex state.
             There are a few things that need to be displayed:
             1 - A button that will unflag the question, returning it to the previous state.
             2 - A selection component, which the user can use to pick a reason that they have flagged the question.
             3 - If the user picked "other," a text box that they can type some notes into.
             4 - A submit button, to notify the Salesforce org that the question was flagged.
         -->
        <template if:true={noteState}>
            <lightning-button-icon icon-name="utility:report_issue" variant="bare" onclick={unflagButtonClicked} alternative-text="Cancel Flag" title="Cancel Flag"></lightning-button-icon>
            <lightning-combobox name="category" label="Category" options={categoryList} onchange={categoryChanged}></lightning-combobox>
            <lightning-combobox name="subcategory" label="Subcategory" ></lightning-combobox>
            <lightning-textarea name="flagNotesInput" required="false" value="" placeholder="Add Notes" maxlength={maxNotesLength} message-when-too-long="Maximum length of notes is {maxNotesLength} characters"></lightning-textarea>
            <lightning-button variant="success" label="Submit" title="Submit" onclick={submitButtonClicked}></lightning-button>
        </template>
        <!-- The Submitted state is displayed after the Submit button has been clicked.
             In this case, a message should be displayed, confirming the submission.
         -->
        <template if:true={submittedState}>
            Thank you for your feedback.
        </template>
    </lightning-card>
</template>